-- Creación del secuenciador

create sequence alohandes_sequence; 

---------------------------------------------------TABLA PROVEEDOR ------------------------------------------------------
CREATE TABLE PROVEEDOR
   ( NOMBRE VARCHAR2(255 BYTE),
    TIPO_DOCUMENTO VARCHAR2(255 BYTE),
    NUM_DOCUMENTO NUMBER,
CONSTRAINT PROVEEDOR_PK PRIMARY KEY (NUM_DOCUMENTO, TIPO_DOCUMENTO));

---------------------------------------------------TABLA CLIENTE ------------------------------------------------------
CREATE TABLE CLIENTE
   ( NOMBRE VARCHAR2(255 BYTE),
    TIPO_PERSONA VARCHAR2(255 BYTE),
    TIPO_DOCUMENTO VARCHAR2(255 BYTE),
    NUM_DOCUMENTO NUMBER,
CONSTRAINT CLIENTE_PK PRIMARY KEY (NUM_DOCUMENTO, TIPO_DOCUMENTO));
 

--------------------------------------------------- TABLA RESERVA-------------------------------------------------------
CREATE TABLE RESERVA
    (ESTADO VARCHAR2(255 BYTE),
    FECHA DATE,
    ID NUMBER,
    CLIENTE_NUM_DOC NUMBER,
    CLIENTE_TIPO_DOC VARCHAR2(255 BYTE),
    ALOJAMIENTO NUMBER,
    ID_TIEMPO NUMBER,
    PRECIO NUMBER,
    CONSTRAINT RESERVA_PK PRIMARY KEY (ID));


 
-----------------------------------------TABLA TIEMPO_OCUPACION--------------------------------------------------------------
CREATE TABLE TIEMPO_OCUPACION
    ( FECHA_LLEGADA DATE,
    FECHA_SALIDA DATE,
    ID NUMBER,
    CONSTRAINT TIEMPO_OCUPACION_PK PRIMARY KEY (ID));


----------------------------------------------- TABLA HABITACION -------------------------------------------------------------
CREATE TABLE HABITACION
    (ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    EMPRESA NUMBER,
    NUM_HABITACION NUMBER,
    TIPO VARCHAR2(255 BYTE),
    UBICACION VARCHAR2(255 BYTE),
    CAPACIDAD NUMBER,
    COMPARTIDA NUMBER,
    TAMANIO NUMBER,
    CONSTRAINT HABITACION_PK PRIMARY KEY (ID));
 
 

--------------------------------------------------TABLA SERVICIO--------------------------------------------------------------
CREATE TABLE SERVICIO
    (NOMBRE VARCHAR2(255 BYTE),
    DESCRIPCION VARCHAR2(255 BYTE),
    CONSTRAINT SERVICIO_PK PRIMARY KEY (NOMBRE));
   


--------------------------------------------------TABLA RESERVA_HABITACION-----------------------------------------------------
CREATE TABLE RESERVA_HABITACION
    (ID_RESERVA NUMBER,
    ID_HABITACION NUMBER,
    CONSTRAINT RESERVA_HABITACION_PK PRIMARY KEY (ID_RESERVA, ID_HABITACION));
 
 

-------------------------------------------------TABLA HABITACION_TIEMPO_OCUPADA-----------------------------------------------
CREATE TABLE HABITACION_TIEMPO_OCUPADA
    (ID_HABITACION NUMBER,
    ID_TIEMPO_OCUPACION NUMBER,
    CONSTRAINT HABITACION_TIEMPO_OCUPADA_PK PRIMARY KEY (ID_HABITACION, ID_TIEMPO_OCUPACION));

    

----------------------------------------------------TABLA HABITACION_SERVICIO-------------------------------------------------
CREATE TABLE HABITACION_SERVICIO
    (NOMBRE_SERVICIO VARCHAR2(255 BYTE),
    ID_HABITACION NUMBER,
    COSTO NUMBER,
    CONSTRAINT HABITACION_SERVICIO_PK PRIMARY KEY (NOMBRE_SERVICIO, ID_HABITACION));

   
------------------------------------------------------ TABLA ALOJAMIENTO-------------------------------------------------------
CREATE TABLE ALOJAMIENTO
    (ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    DIRECCION VARCHAR2(255 BYTE),
    PROVEEDOR_TIPO_DOC VARCHAR2(255 BYTE),
    PROVEEDOR_NUM_DOC NUMBER,
    CONSTRAINT ALOJAMIENTO_PK PRIMARY KEY (ID));


----------------------------------------------------TABLA INMUEBLE_PERSONA-----------------------------------------------------
CREATE TABLE INMUEBLE_PERSONA
    (TIPO_PROPIETARIO VARCHAR2(255 BYTE),
    NUM_HABITACIONES NUMBER,
    AMOBLADO NUMBER,
    TIPO_INMUEBLE VARCHAR2(255 BYTE),
    ID_ALOJAMIENTO NUMBER,
    CONSTRAINT INMUEBLE_PERSONA_PK PRIMARY KEY (ID_ALOJAMIENTO));   


    --------------------------------------------TABLA ALOJAMIENTO_SERVICIO---------------------------------------------------------
CREATE TABLE ALOJAMIENTO_SERVICIO
    (NOMBRE_SERVICIO VARCHAR2(255 BYTE),
    ID_ALOJAMIENTO NUMBER,
    COSTO NUMBER,
    CONSTRAINT ALOJAMIENTO_SERVICIO_PK PRIMARY KEY (NOMBRE_SERVICIO, ID_ALOJAMIENTO));
    

------------------------------------------------------------TABLA EMPRESA------------------------------------------------------
CREATE TABLE EMPRESA
    (ID_ALOJAMIENTO NUMBER,
    NOMBRE VARCHAR2(255 BYTE),
    CONSTRAINT EMPRESA_PK PRIMARY KEY (ID_ALOJAMIENTO));


-----------------------------------------------TABLA VIVIENDA_UNIVERSITARIA-----------------------------------------------------
CREATE TABLE VIVIENDA_UNIVERSITARIA
    (ID_EMPRESA NUMBER,
    CONSTRAINT VIVIENDA_UNIVERSITARIA_PK PRIMARY KEY (ID_EMPRESA));
 

---------------------------------------------------- TABLA HOSTAL--------------------------------------------------------------
CREATE TABLE HOSTAL
    (ID_EMPRESA NUMBER,
    HORARIO_ATENCION VARCHAR2(255 BYTE),
    ID_SUPERINTENDENCIA VARCHAR2(255 BYTE),
    ID_CAMARA VARCHAR2(255 BYTE),
    CONSTRAINT HOSTAL_PK PRIMARY KEY (ID_EMPRESA));
    

--------------------------------------------------------TABLA HOTEL------------------------------------------------------------
CREATE TABLE HOTEL
    (ID_EMPRESA NUMBER,
    ID_SUPERINTENDENCIA VARCHAR2(255 BYTE),
    ID_CAMARA VARCHAR2(255 BYTE),
    CONSTRAINT HOTEL_PK PRIMARY KEY (ID_EMPRESA));

 
-----------------------------------------------------------TABLA MENAJE--------------------------------------------------------
CREATE TABLE MENAJE
    (NOMBRE VARCHAR2(255 BYTE),
    CONSTRAINT MENAJE_PK PRIMARY KEY (NOMBRE));



-----------------------------------------------------TABLA MENAJE_VIVIENDAU-----------------------------------------------------
CREATE TABLE MENAJE_VIVIENDAU
    (ID_VIVIENDAU NUMBER,
    NOMBRE_MENAJE VARCHAR2(255 BYTE),
    CANTIDAD NUMBER,
    CONSTRAINT MENAJE_VIVIENDAU_PK PRIMARY KEY (ID_VIVIENDAU, NOMBRE_MENAJE));



---------------------------------------------------TABLA MENAJE_INMUEBLE-------------------------------------------------------
CREATE TABLE MENAJE_INMUEBLE
    (ID_INMUEBLE NUMBER,
    NOMBRE_MENAJE VARCHAR2(255 BYTE),
    CANTIDAD NUMBER,
    CONSTRAINT MENAJE_INMUEBLE_PK PRIMARY KEY (ID_INMUEBLE, NOMBRE_MENAJE));
   

----------------------------------------------TABLA INMUEBLE_TIEMPO_OCUPADA---------------------------------------------------
CREATE TABLE INMUEBLE_TIEMPO_OCUPADA
    (ID_INMUEBLE NUMBER,
    ID_TIEMPO NUMBER,
    CONSTRAINT INMUEBLE_TIEMPO_OCUPADA_PK PRIMARY KEY (ID_INMUEBLE, ID_TIEMPO));   

 

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------RESTRICCIONES-----------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

 
---------------------------------------------------TABLA PROVEEDOR ------------------------------------------------------
ALTER TABLE PROVEEDOR
    MODIFY (NOMBRE NOT NULL ENABLE);

ALTER TABLE PROVEEDOR
    ADD CONSTRAINT CK_TIPO_DOCUMENTO_PROV
        CHECK (TIPO_DOCUMENTO IN('CC','CE','TI'))
ENABLE;

---------------------------------------------------TABLA CLIENTE ------------------------------------------------------
ALTER TABLE CLIENTE
    MODIFY (NOMBRE NOT NULL ENABLE);
    
ALTER TABLE CLIENTE
    MODIFY (TIPO_PERSONA NOT NULL ENABLE);

ALTER TABLE CLIENTE
    ADD CONSTRAINT TIPO_PERSONA_DOM
        CHECK (TIPO_PERSONA IN('estudiante','egresado','profesor','pariente','empleado', 'registro en evento'))
ENABLE;

ALTER TABLE CLIENTE
    ADD CONSTRAINT TIPO_DOCUMENTO_DOM
        CHECK (TIPO_DOCUMENTO IN('CC','CE','TI'))
ENABLE;


--------------------------------------------------- TABLA RESERVA-------------------------------------------------------
ALTER TABLE RESERVA
    MODIFY (ESTADO NOT NULL ENABLE);
    
ALTER TABLE RESERVA
    MODIFY (PRECIO NOT NULL ENABLE);

ALTER TABLE RESERVA
    MODIFY (FECHA NOT NULL ENABLE);

ALTER TABLE RESERVA
    MODIFY (CLIENTE_NUM_DOC NOT NULL ENABLE);

ALTER TABLE RESERVA
    MODIFY (CLIENTE_TIPO_DOC NOT NULL ENABLE);

ALTER TABLE RESERVA
    ADD CONSTRAINT FK_R_CLIENTE_DOC
        FOREIGN KEY (CLIENTE_TIPO_DOC, CLIENTE_NUM_DOC) REFERENCES CLIENTE (TIPO_DOCUMENTO, NUM_DOCUMENTO)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE RESERVA
    ADD CONSTRAINT FK_R_ALOJAMIENTO
        FOREIGN KEY (ALOJAMIENTO) REFERENCES ALOJAMIENTO (ID)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE RESERVA
    ADD CONSTRAINT FK_R_TIEMPO_OCU
        FOREIGN KEY (ID_TIEMPO) REFERENCES TIEMPO_OCUPACION (ID)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE RESERVA
    ADD CONSTRAINT CK_R_PRECIO
        CHECK (PRECIO >= 0)
ENABLE;

-----------------------------------------TABLA TIEMPO_OCUPACION--------------------------------------------------------------
ALTER TABLE TIEMPO_OCUPACION
    MODIFY (FECHA_LLEGADA NOT NULL ENABLE);

ALTER TABLE TIEMPO_OCUPACION
    ADD CONSTRAINT CK_FECHA_SALIDA
        CHECK (FECHA_SALIDA > FECHA_LLEGADA)
ENABLE;

ALTER TABLE TIEMPO_OCUPACION
    MODIFY (FECHA_SALIDA NOT NULL ENABLE);
    
    
----------------------------------------------- TABLA HABITACION -------------------------------------------------------------
ALTER TABLE HABITACION
    ADD CONSTRAINT FK_HA_EMPRESA
        FOREIGN KEY (EMPRESA) REFERENCES EMPRESA (ID_ALOJAMIENTO)   
        ON DELETE CASCADE
ENABLE;

ALTER TABLE HABITACION
    MODIFY (EMPRESA NOT NULL ENABLE);

ALTER TABLE HABITACION
    MODIFY (NUM_HABITACION NOT NULL ENABLE);

ALTER TABLE HABITACION
    MODIFY (UBICACION NOT NULL ENABLE);

ALTER TABLE HABITACION
    ADD CONSTRAINT CK_COMPARTIDA
        CHECK (COMPARTIDA IN (0,1))
ENABLE;

ALTER TABLE HABITACION
    MODIFY (COMPARTIDA NOT NULL ENABLE);

ALTER TABLE HABITACION
    MODIFY (TAMANIO NOT NULL ENABLE);

ALTER TABLE HABITACION
    ADD CONSTRAINT CK_TAMANIO
        CHECK (TAMANIO > 0)
ENABLE;

ALTER TABLE HABITACION
    ADD CONSTRAINT CK_TIPO
        CHECK (TIPO IN('ESTANDAR','SEMISUITE','SUITE','NA'))
ENABLE;

ALTER TABLE HABITACION
    MODIFY (TIPO NOT NULL ENABLE);

ALTER TABLE HABITACION
    MODIFY (CAPACIDAD NOT NULL ENABLE);

ALTER TABLE HABITACION
    ADD CONSTRAINT CK_CAPACIDAD
        CHECK (CAPACIDAD > 0 AND CAPACIDAD < 9)
ENABLE;


--------------------------------------------------TABLA SERVICIO--------------------------------------------------------------
ALTER TABLE SERVICIO
    MODIFY (DESCRIPCION NOT NULL ENABLE);


--------------------------------------------------TABLA RESERVA_HABITACION-----------------------------------------------------
ALTER TABLE RESERVA_HABITACION
    ADD CONSTRAINT FK_RH_RESERVA
        FOREIGN KEY (ID_RESERVA) REFERENCES RESERVA (ID)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE RESERVA_HABITACION
    ADD CONSTRAINT FK_RH_HABITACION
        FOREIGN KEY (ID_HABITACION) REFERENCES HABITACION (ID)
        ON DELETE CASCADE
ENABLE;

-------------------------------------------------TABLA HABITACION_TIEMPO_OCUPADA-----------------------------------------------
ALTER TABLE HABITACION_TIEMPO_OCUPADA
    ADD CONSTRAINT FK_HTO_HABITACION
        FOREIGN KEY (ID_HABITACION) REFERENCES HABITACION (ID)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE HABITACION_TIEMPO_OCUPADA
    ADD CONSTRAINT FK_HTO_TIEMPO_OCU
        FOREIGN KEY (ID_TIEMPO_OCUPACION) REFERENCES TIEMPO_OCUPACION (ID)
        ON DELETE CASCADE
ENABLE;


----------------------------------------------------TABLA HABITACION_SERVICIO-------------------------------------------------
ALTER TABLE HABITACION_SERVICIO
    ADD CONSTRAINT FK_HS_SERVICIO
        FOREIGN KEY (NOMBRE_SERVICIO) REFERENCES SERVICIO (NOMBRE)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE HABITACION_SERVICIO
    ADD CONSTRAINT FK_HS_HABITACION
        FOREIGN KEY (ID_HABITACION) REFERENCES HABITACION (ID)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE HABITACION_SERVICIO
    ADD CONSTRAINT CK_HS_COSTO
        CHECK (COSTO >= 0)
ENABLE;

ALTER TABLE HABITACION_SERVICIO
    MODIFY (COSTO NOT NULL ENABLE);
    

-----------------------------------------------------------TABLA MENAJE--------------------------------------------------------



------------------------------------------------------ TABLA ALOJAMIENTO-------------------------------------------------------
ALTER TABLE ALOJAMIENTO
    MODIFY (DIRECCION NOT NULL ENABLE);

ALTER TABLE ALOJAMIENTO
    ADD CONSTRAINT UN_DIRECCION
        UNIQUE (DIRECCION)
ENABLE;

ALTER TABLE ALOJAMIENTO
    MODIFY (PROVEEDOR_NUM_DOC NOT NULL ENABLE);

ALTER TABLE ALOJAMIENTO
    MODIFY (PROVEEDOR_TIPO_DOC NOT NULL ENABLE);

ALTER TABLE ALOJAMIENTO
    ADD CONSTRAINT FK_A_PROVEEDOR
        FOREIGN KEY (PROVEEDOR_TIPO_DOC, PROVEEDOR_NUM_DOC) REFERENCES PROVEEDOR (TIPO_DOCUMENTO, NUM_DOCUMENTO)
        ON DELETE CASCADE
ENABLE;


----------------------------------------------------TABLA INMUEBLE_PERSONA-----------------------------------------------------
ALTER TABLE INMUEBLE_PERSONA
    ADD CONSTRAINT CK_TIPOPROPIETARIO
        CHECK (TIPO_PROPIETARIO IN ('PROFESOR', 'EMPLEADO', 'ESTUDIANTE', 'PADRE_EST', 'VECINO'))
ENABLE;

ALTER TABLE INMUEBLE_PERSONA
    MODIFY (TIPO_PROPIETARIO NOT NULL ENABLE);

ALTER TABLE INMUEBLE_PERSONA
    ADD CONSTRAINT CK_NUM_HABITACIONES
        CHECK (NUM_HABITACIONES > 0)
ENABLE;

ALTER TABLE INMUEBLE_PERSONA
    MODIFY (NUM_HABITACIONES NOT NULL ENABLE);

ALTER TABLE INMUEBLE_PERSONA
    MODIFY (AMOBLADO NOT NULL ENABLE);

ALTER TABLE INMUEBLE_PERSONA
    ADD CONSTRAINT CK_AMOBLADO
        CHECK (AMOBLADO IN(0,1))
ENABLE;

ALTER TABLE INMUEBLE_PERSONA
    MODIFY ( TIPO_INMUEBLE NOT NULL ENABLE);

ALTER TABLE INMUEBLE_PERSONA
    ADD CONSTRAINT CK_TIPO_INMUEBLE
        CHECK (TIPO_INMUEBLE IN('HABITACION','APARTAMENTO','VIVIENDA_ESPORADICA'))
ENABLE;

ALTER TABLE INMUEBLE_PERSONA
    ADD CONSTRAINT FK_IP_ALOJAMIENTO
        FOREIGN KEY (ID_ALOJAMIENTO) REFERENCES ALOJAMIENTO (ID)
        ON DELETE CASCADE
ENABLE;


--------------------------------------------TABLA ALOJAMIENTO_SERVICIO---------------------------------------------------------
ALTER TABLE ALOJAMIENTO_SERVICIO
    ADD CONSTRAINT FK_AS_SERVICIO
        FOREIGN KEY (NOMBRE_SERVICIO) REFERENCES SERVICIO (NOMBRE)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE ALOJAMIENTO_SERVICIO
    ADD CONSTRAINT FK_AS_ALOJAMIENTO
        FOREIGN KEY (ID_ALOJAMIENTO) REFERENCES ALOJAMIENTO (ID)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE ALOJAMIENTO_SERVICIO
    MODIFY (COSTO NOT NULL ENABLE);

ALTER TABLE ALOJAMIENTO_SERVICIO
    ADD CONSTRAINT CK_AS_COSTO
        CHECK (COSTO >= 0)
ENABLE;


------------------------------------------------------------TABLA EMPRESA------------------------------------------------------
ALTER TABLE EMPRESA
    ADD CONSTRAINT FK_E_ALOJAMIENTO
        FOREIGN KEY (ID_ALOJAMIENTO) REFERENCES ALOJAMIENTO (ID)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE EMPRESA
    MODIFY (NOMBRE NOT NULL ENABLE);


-----------------------------------------------TABLA VIVIENDA_UNIVERSITARIA-----------------------------------------------------
ALTER TABLE VIVIENDA_UNIVERSITARIA
    ADD CONSTRAINT FK_VU_EMPRESA
        FOREIGN KEY (ID_EMPRESA) REFERENCES EMPRESA (ID_ALOJAMIENTO)
        ON DELETE CASCADE
ENABLE;


---------------------------------------------------- TABLA HOSTAL--------------------------------------------------------------
ALTER TABLE HOSTAL
    ADD CONSTRAINT FK_HOSTAL_EMPRESA
        FOREIGN KEY (ID_EMPRESA) REFERENCES EMPRESA (ID_ALOJAMIENTO)
        ON DELETE CASCADE
ENABLE;

 
ALTER TABLE HOSTAL
    MODIFY (HORARIO_ATENCION NOT NULL ENABLE);

ALTER TABLE HOSTAL
    ADD CONSTRAINT UN_HOS_ID_SUPERIN
        UNIQUE (ID_SUPERINTENDENCIA)
ENABLE;

ALTER TABLE HOSTAL
    MODIFY (ID_SUPERINTENDENCIA NOT NULL ENABLE);

ALTER TABLE HOSTAL
    ADD CONSTRAINT UN_HOS_ID_CAMARA
        UNIQUE (ID_CAMARA)
ENABLE;

ALTER TABLE HOSTAL
    MODIFY (ID_CAMARA NOT NULL ENABLE);


--------------------------------------------------------TABLA HOTEL------------------------------------------------------------
ALTER TABLE HOTEL
    ADD CONSTRAINT FK_HOTEL_EMPRESA
        FOREIGN KEY (ID_EMPRESA) REFERENCES EMPRESA (ID_ALOJAMIENTO)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE HOTEL
    ADD CONSTRAINT UN_HOT_ID_SUPERIN
        UNIQUE (ID_SUPERINTENDENCIA)
ENABLE;

ALTER TABLE HOTEL
    MODIFY (ID_SUPERINTENDENCIA NOT NULL ENABLE);

ALTER TABLE HOTEL
    ADD CONSTRAINT UN_HOT_ID_CAMARA
        UNIQUE (ID_CAMARA)
ENABLE;

ALTER TABLE HOTEL
    MODIFY (ID_CAMARA NOT NULL ENABLE);


-----------------------------------------------------TABLA MENAJE_VIVIENDAU-----------------------------------------------------
ALTER TABLE MENAJE_VIVIENDAU
    ADD CONSTRAINT FK_MV_ID_VIVIENDAU
        FOREIGN KEY (ID_VIVIENDAU) REFERENCES VIVIENDA_UNIVERSITARIA (ID_EMPRESA)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE MENAJE_VIVIENDAU
    ADD CONSTRAINT FK_MV_MENAJE
        FOREIGN KEY (NOMBRE_MENAJE) REFERENCES MENAJE (NOMBRE)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE MENAJE_VIVIENDAU
    MODIFY (CANTIDAD NOT NULL ENABLE);

ALTER TABLE MENAJE_VIVIENDAU
    ADD CONSTRAINT CK_CANTIDAD
        CHECK (CANTIDAD > 0)
ENABLE;

---------------------------------------------------TABLA MENAJE_INMUEBLE-------------------------------------------------------
ALTER TABLE MENAJE_INMUEBLE
    ADD CONSTRAINT FK_MI_INMUEBLE
        FOREIGN KEY (ID_INMUEBLE) REFERENCES INMUEBLE_PERSONA (ID_ALOJAMIENTO)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE MENAJE_INMUEBLE
    ADD CONSTRAINT FK_MI_MENAJE
        FOREIGN KEY (NOMBRE_MENAJE) REFERENCES MENAJE (NOMBRE)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE MENAJE_INMUEBLE
    MODIFY (CANTIDAD NOT NULL ENABLE);

ALTER TABLE MENAJE_INMUEBLE
    ADD CONSTRAINT CK_CANTIDAD_menaje_inmueble
        CHECK (CANTIDAD > 0)
ENABLE;


----------------------------------------------TABLA INMUEBLE_TIEMPO_OCUPADA---------------------------------------------------
ALTER TABLE INMUEBLE_TIEMPO_OCUPADA
    ADD CONSTRAINT FK_ITO_INMUEBLE
        FOREIGN KEY (ID_INMUEBLE) REFERENCES INMUEBLE_PERSONA (ID_ALOJAMIENTO)
        ON DELETE CASCADE
ENABLE;

ALTER TABLE INMUEBLE_TIEMPO_OCUPADA
    ADD CONSTRAINT FK_ITO_TIEMPO_OCU
        FOREIGN KEY (ID_TIEMPO) REFERENCES TIEMPO_OCUPACION (ID)
        ON DELETE CASCADE
ENABLE;

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

----------------------------------------------------------TRIGGERS--------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------

CREATE TRIGGER TRG_CHECK_FECHA_RESERVA
    BEFORE INSERT OR UPDATE OF FECHA ON RESERVA
    FOR EACH ROW
        WHEN (NEW.FECHA > CURRENT_DATE)
    BEGIN
        RAISE_APPLICATION_ERROR( -20001,
          'Invalid FECHA: FECHA must be less or equal than the current date');
    END TRG_CHECK_FECHA_RESERVA;
/

CREATE TRIGGER TRG_CHECK_LLEGADA_TIEMPO_OCU
    BEFORE INSERT OR UPDATE OF FECHA_LLEGADA ON TIEMPO_OCUPACION
    FOR EACH ROW
        WHEN (NEW.FECHA_LLEGADA <= CURRENT_DATE)
    BEGIN
        RAISE_APPLICATION_ERROR( -20001,
          'Invalid FECHA_LLEGADA: FECHA_LLEGADA must be greater or equal than the current date');
    END TRG_CHECK_LLEGADA_TIEMPO_OCU;
/


--DROP TABLE ALOJAMIENTO CASCADE CONSTRAINTS;
--DROP TABLE ALOJAMIENTO_SERVICIO CASCADE CONSTRAINT;
--DROP TABLE CLIENTE CASCADE CONSTRAINTS;
--DROP TABLE EMPRESA CASCADE CONSTRAINTS;
--DROP TABLE HABITACION CASCADE CONSTRAINTS;
--DROP TABLE HABITACION_SERVICIO CASCADE CONSTRAINTS;
--DROP TABLE HABITACION_TIEMPO_OCUPADA CASCADE CONSTRAINTS;
--DROP TABLE HOSTAL CASCADE CONSTRAINTS;
--DROP TABLE HOTEL CASCADE CONSTRAINTS;
--DROP TABLE INMUEBLE_PERSONA CASCADE CONSTRAINTS;
--DROP TABLE INMUEBLE_TIEMPO_OCUPADA CASCADE CONSTRAINTS;
--                                                                                                              
----------------------------------------------------------------------------------------------------------------------------------------------------------------
--DROP TABLE MENAJE CASCADE CONSTRAINTS;
--DROP TABLE MENAJE_INMUEBLE CASCADE CONSTRAINTS;
--DROP TABLE MENAJE_VIVIENDAU CASCADE CONSTRAINTS;
--DROP TABLE RESERVA CASCADE CONSTRAINTS;
--DROP TABLE RESERVA_HABITACION CASCADE CONSTRAINTS;
--DROP TABLE SERVICIO CASCADE CONSTRAINTS;
--DROP TABLE TIEMPO_OCUPACION CASCADE CONSTRAINTS;
--DROP TABLE VIVIENDA_UNIVERSITARIA CASCADE CONSTRAINTS;


COMMIT;